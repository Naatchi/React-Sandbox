(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{3283:function(e,t,r){"use strict";var n=r(9499),s=r(5893);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,s.jsx)("img",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({src:"/images/icons/favicon.svg",alt:"Logo",title:"Wynntils Logo",className:"w-[3.25rem] h-[3.25rem]"},e))}},4405:function(e,t,r){"use strict";var n=r(5893);t.Z=function(e){var t=e.logo,r=e.children;return(0,n.jsx)("div",{className:"min-h-screen flex flex-col sm:justify-center items-center pt-6 sm:pt-0 bg-gray-100",children:(0,n.jsxs)("div",{className:"w-full sm:max-w-md mt-6 px-6 py-4 bg-white shadow-md overflow-hidden sm:rounded-lg",children:[(0,n.jsx)("div",{children:t}),r]})})}},2091:function(e,t,r){"use strict";var n=r(9499),s=r(4730),c=r(1436),o=r(2814),i=r(5893),a=["errors"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.Z=function(e){var t=e.errors,r=void 0===t?[]:t,n=(0,s.Z)(e,a);return(0,i.jsx)(i.Fragment,{children:r.length>0&&(0,i.jsxs)("div",l(l({},n),{},{children:[(0,i.jsx)("div",{className:"pr-5",children:(0,i.jsx)(o.G,{icon:c.bE7,size:"lg"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"font-bold",children:"Whoops! Something went wrong."}),(0,i.jsx)("ul",{className:"list-disc list-inside text-sm",children:r.map((function(e){return(0,i.jsx)("li",{children:e},e)}))})]})]}))})}},6348:function(e,t,r){"use strict";var n=r(9499),s=r(4730),c=r(5893),o=["type","className"];function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){var t=e.type,r=e.className,a=(0,s.Z)(e,o);return(0,c.jsx)("button",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:t,className:"".concat(r," inline-flex items-center px-4 py-2 border-none border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest focus:outline-none focus:border-gray-900 focus:ring ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150")},a))}},8287:function(e,t,r){"use strict";var n=r(9499),s=r(4730),c=r(5893),o=["disabled","className"];function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){var t=e.disabled,r=void 0!==t&&t,a=e.className,u=(0,s.Z)(e,o);return(0,c.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({disabled:r,className:"".concat(a," rounded-md shadow-sm border-gray-300 focus:border-green-300 focus:ring focus:ring-green-200 focus:ring-opacity-50")},u))}},8226:function(e,t,r){"use strict";var n=r(9499),s=r(4730),c=r(5893),o=["className","children"];function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.Z=function(e){var t=e.className,r=e.children,n=(0,s.Z)(e,o);return(0,c.jsx)("label",a(a({className:"".concat(t," block font-medium text-sm text-gray-700")},n),{},{children:r}))}},55:function(e,t,r){"use strict";r.d(t,{a:function(){return b}});var n=r(4730),s=r(29),c=r(7794),o=r.n(c),i=r(5522),a=r(9669),u=r.n(a),l=r(3454),f=u().create({baseURL:l.env.NEXT_PUBLIC_BACKEND_URL,headers:{"X-Requested-With":"XMLHttpRequest"},withCredentials:!0}),p=r(7294),d=r(1163),m=["setErrors"],h=["setErrors","setStatus"],b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.middleware,r=e.redirectIfAuthenticated,c=(0,d.useRouter)(),a=(0,i.ZP)("/api/user",(function(){return f.get("/api/user").then((function(e){return e.data})).catch((function(e){if(409!=e.response.status)throw e}))})),u=a.data,l=a.error,b=a.revalidate,g=(0,i.ZP)("/api/punishments/me",(function(){return f.get("/api/punishments/me").then((function(e){return e.data})).catch((function(e){if(409!=e.response.status)throw e}))})),j=g.data,O=function(){return f.get("/sanctum/csrf-cookie")},y=function(){var e=(0,s.Z)(o().mark((function e(t){var r,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.setErrors,s=(0,n.Z)(t,m),e.next=3,O();case 3:r([]),f.post("/register",s).then((function(){return b()})).catch((function(e){if(422!=e.response.status)throw e;r(Object.values(e.response.data.errors).flat())}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,s.Z)(o().mark((function e(t){var r,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.setErrors,s=t.setStatus,c=(0,n.Z)(t,h),e.next=3,O();case 3:r([]),s(null),f.post("/login",c).then((function(){return b()})).catch((function(e){if(422!=e.response.status)throw e;r(Object.values(e.response.data.errors).flat())}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,s.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=4;break}return e.next=3,f.post("/logout");case 3:b();case 4:window.location.pathname="/auth/login";case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.useEffect)((function(){"guest"==t&&r&&u&&c.push(r),"auth"==t&&l&&x()}),[u,l]),{user:u,punishments:j,register:y,login:v,logout:x}}},8489:function(e,t,r){"use strict";var n=r(9008),s=r(5893);t.Z=function(e){var t=e.children;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.default,{children:[(0,s.jsx)("title",{children:"Wynntils"}),(0,s.jsx)("link",{rel:"icon",href:"/images/icons/favicon.svg",type:"image/x-icon"})]}),(0,s.jsx)("div",{className:"font-sans text-gray-900 antialiased",children:t})]})}},3472:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var n=r(29),s=r(7794),c=r.n(s),o=r(3283),i=r(4405),a=r(9499),u=r(4730),l=r(5893),f=["status","className"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(e){var t=e.status,r=e.className,n=(0,u.Z)(e,f);return(0,l.jsx)(l.Fragment,{children:t&&(0,l.jsx)("div",d(d({className:"".concat(r," font-medium text-sm text-green-600")},n),{},{children:t}))})},h=r(2091),b=r(6348),g=r(8489),j=r(8287),O=r(8226),y=r(1664),v=r(55),x=r(7294),w=r(1163),P=r(2814),N=r(1436),Z=r(1876).Buffer,E=function(){var e=(0,w.useRouter)(),t=(0,v.a)({middleware:"guest",redirectIfAuthenticated:"/user/dashboard"}).login,r=(0,x.useState)(""),s=r[0],a=r[1],u=(0,x.useState)(""),f=u[0],p=u[1],d=(0,x.useState)([]),E=d[0],D=d[1],k=(0,x.useState)(null),S=k[0],_=k[1];(0,x.useEffect)((function(){var t;(null===(t=e.query.reset)||void 0===t?void 0:t.length)>0&&0==E.length?_(Z.from(e.query.reset.toString(),"base64")):_(null)}));var C=function(){var e=(0,n.Z)(c().mark((function e(r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),t({username:s,password:f,setErrors:D,setStatus:_});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsx)(g.Z,{children:(0,l.jsxs)(i.Z,{logo:(0,l.jsx)(y.default,{href:"/",children:(0,l.jsxs)("a",{className:"flex items-center",children:[(0,l.jsx)(o.Z,{className:"w-10 h-10 fill-current text-gray-500 mr-3"}),(0,l.jsx)("h1",{children:"Wynntils"})]})}),children:[(0,l.jsx)(m,{className:"mb-4",status:S}),(0,l.jsx)(h.Z,{className:"bg-red-300 my-4 p-5 rounded-md flex items-center",errors:E}),(0,l.jsxs)("div",{className:"bg-yellow-200 my-4 p-5 rounded-md flex items-center ",children:[(0,l.jsx)(P.G,{icon:N.ik8,size:"lg",className:"pr-5"}),(0,l.jsxs)("p",{children:["Log in with your ",(0,l.jsx)("strong",{children:"Wynntils account"}),", not your ",(0,l.jsx)("strong",{children:"Minecraft account"})]})]}),(0,l.jsxs)("form",{onSubmit:C,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(O.Z,{className:"",htmlFor:"username",children:"Minecraft Username"}),(0,l.jsx)(j.Z,{id:"username",type:"text",value:s,className:"block mt-1 w-full",onChange:function(e){return a(e.target.value)},required:!0,autoFocus:!0})]}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)(O.Z,{className:"",htmlFor:"password",children:"Password"}),(0,l.jsx)(j.Z,{id:"password",type:"password",value:f,className:"block mt-1 w-full",onChange:function(e){return p(e.target.value)},required:!0,autoComplete:"current-password"})]}),(0,l.jsx)("div",{className:"block mt-4",children:(0,l.jsxs)("label",{htmlFor:"remember_me",className:"inline-flex items-center",children:[(0,l.jsx)("input",{id:"remember_me",type:"checkbox",name:"remember",className:"rounded border-gray-300 text-green-400 shadow-sm focus:border-green-4OO focus:ring focus:ring-green-200 focus:ring-opacity-50"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]})}),(0,l.jsx)("div",{className:"flex items-center justify-end mt-4",children:(0,l.jsx)(b.Z,{type:"",className:"ml-3 bg-green-400 hover:bg-green-500",children:"Login"})})]})]})})}},4895:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return r(3472)}])}},function(e){e.O(0,[523,537,645,814,876,774,888,179],(function(){return t=4895,e(e.s=t);var t}));var t=e.O();_N_E=t}]);